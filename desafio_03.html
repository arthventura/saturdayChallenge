<script>
    /*
    Aluguel de veículo
    Crie um programa que pergunte ao usuário qual o tipo de veículo que deseja alugar:
    1- Carro
    2- Moto
    3- Caminhão

    Caso o usuário não informe o tipo de veículo que deseja alugar, o programa deve perguntar novamente qual o tipo de veículo que o usuário deseja alugar. Caso informe incorretamente por três vezes consecutivas, o programa deve ser encerrado.

    Considerando que escolheu o tipo 1, pergunte qual categoria que pretende, sendo:
    1- Econômico: R$ 100,00 por dia
    2- Intermediário: R$ 150,00 por dia
    3- Luxo: R$ 200,00 por dia

    Contudo, se informou o tipo 2, pergunte qual categoria que pretende, sendo:
    1- Econômico: R$ 50,00 por dia
    2- Intermediário: R$ 100,00 por dia
    3- Luxo: R$ 150,00 por dia
    
    E, se informou o tipo 3, pergunte qual categoria que pretende, sendo:
    1- Pequeno: R$ 200,00 por dia
    2- Médio: R$ 250,00 por dia
    3- Grande: R$ 300,00 por dia

    Caso o usuário não informe corretamente a categoria que deseja alugar, o programa deve perguntar novamente qual a categoria que o usuário deseja alugar. Caso informe incorretamente por três vezes consecutivas, o programa deve ser encerrado.

    O programa deverá perguntar ao usuário quantos dias ele deseja alugar o veículo. Caso o usuário informe um valor inválido, o programa deverá perguntar novamente quantos dias ele deseja alugar o veículo. Caso informe incorretamente por três vezes consecutivas, o programa deve ser encerrado.
    Após informar a quantidade de dias, o programa deverá perguntar se ele deseja contratar seguro. Caso deseja contratar seguro, o valor diário do seguro custa 10% do preço do veículo. Valide o dado informado pelo usuário e, caso ele não digite um valor válido, o programa deverá ser encerrado após três tentativas incorretas.

    Ao final, o programa deverá informar o valor total do aluguel, considerando o valor do veículo, o valor do seguro (caso contratado) e a quantidade de dias que o veículo foi alugado. Peça também para o usuário informar qual foi a Km percorrida. Valide este dado informado pelo usuário e, não digitando um valor correto por três vezes consecutivas, o programa deverá ser encerrado.

    Caso a Km informada ultrapasse a média de 50 km por dia, o programa deverá informar que o usuário deverá pagar um valor adicional de R$ 1,00 por Km excedente. Caso contrário, o programa deverá informar que o usuário não precisará pagar nenhum valor adicional.

    Pergunte também para o usuário, na devolução do veículo, se houveram avarias no veículo. Caso houveram avarias, o programa deverá perguntar ao usuário qual a gravidade das avarias, sendo:
    1- Leve: R$ 100,00
    2- Média: R$ 200,00
    3- Grave: R$ 300,00

    Caso o usuário não informe a gravidade das avarias, o programa deve perguntar novamente qual a gravidade das avarias. Caso informe incorretamente por três vezes consecutivas, o programa deve ser encerrado.
    Ao informar a gravidade das avarias, o programa deverá perguntar a quantidade de avarias daquela categoria e adicionar ao valor a ser pago de aluguel do veículo.

    Pergunte também se houveram mais avarias além daquela categoria já informada. Caso tenham mais avarias, o programa deverá perguntar qual a gravidade das avarias e também a sua respectiva quantidade. Caso não tenham mais avarias, o programa deverá informar o valor total a ser pago pelo aluguel do veículo.

    O programa deverá perguntar ao usuário qual a forma de pagamento desejada, podendo ser:
    1- Dinheiro: 3% de desconto
    2- Cartão de crédito: 5% de acréscimo
    3- Cartão de débito: 3% de acréscimo

    Caso tenha informado incorretamente por três vezes consecutivas, o programa deve ser encerrado.
    Também, caso tenha informado a opção 2, o programa deverá perguntar se deseja parcelar o valor do aluguel. O prazo máximo de parcelamento é de 3x sem juros ou, qualquer outro prazo maior, com limite de 12, terá um outro acréscimo na parcela, correspondente com a taxa de juros de 2% ao mês.

    Ao final, o programa deverá informar o valor total a ser pago pelo aluguel do veículo, considerando o valor do veículo, o valor do seguro (caso contratado), a quantidade de dias que o veículo foi alugado, a quantidade de Km percorrida (e o adicional pago por Km percorrido, se for o caso), o valor das avarias (caso houverem) e a forma de pagamento escolhida pelo usuário.
    */

    let tipoVeiculo = null;
let tentativasTipoVeiculo = 0;

while (!['1', '2', '3'].includes(tipoVeiculo)) {
    if (tentativasTipoVeiculo >= 3) {
        alert("Número máximo de tentativas excedido. Programa encerrado.");
        break;
    }
    tipoVeiculo = prompt("Qual o tipo de veículo que deseja alugar? (1-Carro, 2-Moto, 3-Caminhão): ");
    tentativasTipoVeiculo++;
}

if (tipoVeiculo) {
    let categoria = null;
    let tentativasCategoria = 0;

    if (tipoVeiculo === '1') {
        while (!['1', '2', '3'].includes(categoria)) {
            if (tentativasCategoria >= 3) {
            alert("Número máximo de tentativas excedido. Programa encerrado.");
                break;
            }
            categoria = prompt("Qual a categoria de Carro que deseja alugar? (1-Econômico, 2-Intermediário, 3-Luxo): ");
            tentativasCategoria++;
        }
    } else if (tipoVeiculo === '2') {
        while (!['1', '2', '3'].includes(categoria)) {
            if (tentativasCategoria >= 3) {
            alert("Número máximo de tentativas excedido. Programa encerrado.");
                break;
            }
            categoria = prompt("Qual a categoria de Moto que deseja alugar? (1-Econômico, 2-Intermediário, 3-Luxo): ");
            tentativasCategoria++;
        }
    } else if (tipoVeiculo === '3') {
        while (!['1', '2', '3'].includes(categoria)) {
            if (tentativasCategoria >= 3) {
            alert("Número máximo de tentativas excedido. Programa encerrado.");
                break;
            }
            categoria = prompt("Qual a categoria de Caminhão que deseja alugar? (1-Pequeno, 2-Médio, 3-Grande): ");
            tentativasCategoria++;
        }
    }

    if (categoria) {
        let precoVeiculo = 0;

        if (tipoVeiculo === '1') {
            if (categoria === '1') {
                precoVeiculo = 100.0;
            } else if (categoria === '2') {
                precoVeiculo = 150.0;
            } else if (categoria === '3') {
                precoVeiculo = 200.0;
            }
        } else if (tipoVeiculo === '2') {
            if (categoria === '1') {
                precoVeiculo = 50.0;
            } else if (categoria === '2') {
                precoVeiculo = 100.0;
            } else if (categoria === '3') {
                precoVeiculo = 150.0;
            }
        } else if (tipoVeiculo === '3') {
            if (categoria === '1') {
                precoVeiculo = 200.0;
            } else if (categoria === '2') {
                precoVeiculo = 250.0;
            } else if (categoria === '3') {
                precoVeiculo = 300.0;
            }
        }

        let quantidadeDias = 0;
        let tentativasDias = 0;

        while (quantidadeDias <= 0) {
            if (tentativasDias >= 3) {
            alert("Número máximo de tentativas excedido. Programa encerrado.");
                break;
            }
            quantidadeDias = parseInt(prompt("Quantos dias deseja alugar o veículo? "));
            tentativasDias++;
        }

        if (quantidadeDias) {
            let contratarSeguro = null;
            let tentativasSeguro = 0;

            while (contratarSeguro === null) {
                if (tentativasSeguro >= 3) {
                alert("Número máximo de tentativas excedido. Programa encerrado.");
                    break;
                }
                contratarSeguro = prompt("Deseja contratar seguro? (Digite 'sim' ou 'nao'): ");
                contratarSeguro = contratarSeguro.toLowerCase();
                if (contratarSeguro !== 'sim' && contratarSeguro !== 'nao') {
                    contratarSeguro = null;
                    tentativasSeguro++;
                }
            }

            if (contratarSeguro === 'sim') {
                const valorSeguro = precoVeiculo * quantidadeDias * 0.1;
                precoVeiculo += valorSeguro;
            }

            const kmPercorrida = parseInt(prompt("Quantos Km foram percorridos com o veículo? "));
            let adicionalKm = 0;

            if (kmPercorrida > quantidadeDias * 50) {
                adicionalKm = (kmPercorrida - quantidadeDias * 50) * 1;
            }

            let avaria1 = 0;
            let valorAvaria1 = 0;
            let avaria2 = 0;
            let valorAvaria2 = 0;

            let avaria = prompt(`Seu veículo tem avarias na devolução? (S-Sim | N-Não)`).toUpperCase();
            if (avaria == "S") {
                avaria1 = Number(prompt(`Informe a gravidade da avaria:\n
                1-Leve (R$ 100,00)\n
                2-Média (R$ 200,00)\n
                3-Grave (R$ 300,00)`));
                if (isNaN(avaria1) || avaria < 1 || avaria > 3) {
                    alert(`Tipo de avaria inválida!`);
                    avaria1 = Number(prompt(`Informe a gravidade da avaria:\n
                    1-Leve (R$ 100,00)\n
                    2-Média (R$ 200,00)\n
                    3-Grave (R$ 300,00)`));
                    if (isNaN(avaria1) || avaria < 1 || avaria > 3) {
                        alert(`Tipo de avaria inválida!`);
                        avaria1 = Number(prompt(`Informe a gravidade da avaria:\n
                        1-Leve (R$ 100,00)\n
                        2-Média (R$ 200,00)\n
                        3-Grave (R$ 300,00)`));
                        if (isNaN(avaria1) || avaria < 1 || avaria > 3) {
                            alert(`O programa será encerrado por excesso de tentativas!`);
                            throw new Error(`O programa será encerrado por excesso de tentativas!`);
                        }
                    }
                }
                (avaria1 == 1) ? valorAvaria1 = 100 : (avaria1 == 2) ? valorAvaria1 = 200 : valorAvaria1 == 300;
                let avaria2 = prompt(`Seu veículo possui mais avarias? (S-Sim | N-Não)`).toUpperCase();
                if (avaria2 == "S") {

                }
            }
        }
    }
}
</script>